create table person
(
    id            integer generated by default as identity
        primary key,
    name          varchar(100) not null
        unique,
    year_of_birth integer
        constraint person_age_check
            check (year_of_birth > 1900)
        constraint person_age_check1
            check (year_of_birth < 2022)
);

alter table person
    owner to postgres;

create table book
(
    book_id         integer generated by default as identity
        primary key,
    name            varchar(200),
    author          varchar(100),
    year_of_release integer
        constraint book_yearofrelease_check
            check (year_of_release < 2022),
    is_free         boolean default false,
    owner_id        integer
        references person
            on delete set null
);

alter table book
    owner to postgres;
